

<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">Redis | TenIncense</title>
  
    <link rel="shortcut icon" href="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/601644262819_.pic.jpg">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//fastly.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
   * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "TenIncense";
  mashiro_option.author_name = "";
  mashiro_option.site_url = "https://github.com/Tenincense0714/";
  mashiro_option.v_appId = "6RN5znkrKL14y7H74i40TEuh-gzGzoHsz";
  mashiro_option.v_appKey = "a9t6VNN6REJFw4IejG3wBYXS";
  mashiro_option.mathjax = "0";
  //mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  //mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://fastly.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/16.jpg,https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/10.jpg,https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/13.jpg,https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%203/01.jpg,https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%203/04.jpg,https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%203/05.jpg,https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%203/12.jpg,https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%203/16.jpg".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('朋友，IE浏览器未适配哦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
</head>
</html>
<script src="https://fastly.jsdelivr.net/gh/wallleap/cdn/js/love.js"></script> <!-- 点击出现爱心 -->

<script src="https://fastly.jsdelivr.net/gh/wallleap/cdn/js/canvas-nest.min.js"></script><!--背景动态线条-->

<script src="https://fastly.jsdelivr.net/gh/wallleap/cdn/js/piao.js"></script><!-- 背景彩带 -->

<script src="https://fastly.jsdelivr.net/gh/wallleap/cdn/js/sakura.js"></script><!--樱花特效-->

<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop filter-dot">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="https://github.com/Tenincense0714/">
          <img src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/601644262819_.pic.jpg">
        </a>
      </div>
      <div class="header-info">
        <p>起风了，我在等风，也在等你。</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://fastly.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="https://github.com/Tenincense0714" target="_blank" class="social-github" title="github">
                    <img src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/github.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://music.163.com/" target="_blank" class="social-github" title="wangyiyun">
                    <img src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/wangyiyun.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://mail.163.com/" target="_blank" class="social-github" title="email">
                    <img src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/202205300006276.png">
                  </a>
                </li>
              
            
              
                <li class="wechat">
                  <a href="/#">
                    <img src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/wechat.png">
                  </a>
                  <div class="wechatInner">
                    <img src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/2111653806100_.pic.jpg">
                  </div>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://fastly.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono">TenIncense</span>
            <span class="shironeko"></span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    归档
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/技术/">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          技术
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/生活/">
                          <i class="fa fa-file-text-o" aria-hidden="true"></i>
                          生活
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/资源/">
                          <i class="fa fa-cloud-download" aria-hidden="true"></i>
                          资源
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/随想/">
                          <i class="fa fa-commenting-o" aria-hidden="true"></i>
                          随想
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/转载/">
                          <i class="fa fa-book" aria-hidden="true"></i>
                          转载
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    清单
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/tags/悦读/">
                          <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                          书单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          番组
                        </a>
                      </li>
                    
                      <li>
                        <a href="/music/">
                          <i class="fa fa-headphones" aria-hidden="true"></i>
                          歌单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/tags/图集/">
                          <i class="fa fa-photo" aria-hidden="true"></i>
                          图集
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/comment/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                    留言板
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/links/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
                    友人帐
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/donate/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
                    赞赏
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    关于
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          我？
                        </a>
                      </li>
                    
                      <li>
                        <a href="/theme-sakura/">
                          <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                          主题
                        </a>
                      </li>
                    
                      <li>
                        <a href="/lab/">
                          <i class="fa fa-cogs" aria-hidden="true"></i>
                          Lab
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/client/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-android faa-vertical" aria-hidden="true"></i>
                    客户端
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/atom.xml">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
                    RSS
                  </span>
                </a>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

  <div class="pattern-center single-center">
    <!-- 有配图默认渲染第一张 -->
    <div class="pattern-attachment-img lazyload" style="background-image: url(https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/03.jpg);" src="https://fastly.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/03.jpg">
    </div>
    <header class="pattern-header single-header">
      <h1 class="entry-title">
      Redis</h1>
      <p class="entry-census">
        <span>
          <a href="tenincense.cn">
            <img src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/202205291139260.jpg">
          </a>
        </span>
        <span>
          <a href="tenincense.cn">TenIncense</a>
        </span>
        <span class="bull">
        ·</span>
        2021-11-26<span class="bull">
        ·</span>
      <span id="busuanzi_value_page_pv"></span>次阅读</p>
    </header>
  </div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
        <div class="entry-content">
          <h2 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h2><p>Redis 是一种数据库。能够存储数据、管理数据的一种软件。</p>
<h3 id="数据库应用的发展历程"><a href="#数据库应用的发展历程" class="headerlink" title="数据库应用的发展历程"></a>数据库应用的发展历程</h3><ul>
<li>单机数据库时代：一个应用，对应一个数据库实例</li>
<li><strong>缓存、水平切分时代</strong></li>
<li><strong>读写分离时代</strong></li>
<li><strong>分库分表时代（集群）</strong></li>
</ul>
<h3 id="非关系型数据库-NoSql"><a href="#非关系型数据库-NoSql" class="headerlink" title="非关系型数据库(NoSql)"></a>非关系型数据库(NoSql)</h3><ul>
<li>彻底改变底层存储机制。不再采用关系数据模型，而是采用聚合数据结构存储数据。</li>
<li>Redis 、MongoDB 、HBase、 ……</li>
</ul>
<h3 id="NoSql-数据模型"><a href="#NoSql-数据模型" class="headerlink" title="NoSql 数据模型"></a>NoSql 数据模型</h3><h4 id="一、传统关系型数据库：表"><a href="#一、传统关系型数据库：表" class="headerlink" title="一、传统关系型数据库：表"></a>一、传统关系型数据库：表</h4><p>tbl_student</p>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>age</th>
<th>clazz_id</th>
</tr>
</thead>
<tbody><tr>
<td>1001</td>
<td>zhangsan</td>
<td>20</td>
<td>111</td>
</tr>
<tr>
<td>1002</td>
<td>lisi</td>
<td>21</td>
<td>111</td>
</tr>
</tbody></table>
<p>tbl_clazz</p>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
</tr>
</thead>
<tbody><tr>
<td>111</td>
<td>clazz1</td>
</tr>
<tr>
<td>222</td>
<td>clazz2</td>
</tr>
</tbody></table>
<h4 id="二、非关系型数据库"><a href="#二、非关系型数据库" class="headerlink" title="二、非关系型数据库"></a>二、非关系型数据库</h4><ul>
<li>聚合模型  ==&gt; 把一组相关联的数据作为一个整体进行存储和管理。</li>
<li>BSON：数据保存到键值对、数据和数据之间用逗号隔开，{}表示对象，[ ]表示数据</li>
</ul>
<pre><code class="json">{
&quot;student&quot;:{
 &quot;id&quot;:1001,
 &quot;name&quot;:&quot;zhangsan&quot;,
 &quot;address&quot;:{&quot;province&quot;:&quot;beijing&quot;,&quot;city&quot;:&quot;daxingqu&quot;,&quot;street&quot;:&quot;liangshuihe&quot;},
 &quot;course&quot;:[
   {
     &quot;id&quot;:01,
     &quot;name&quot;:&quot;java&quot;
   },
   {
     &quot;id&quot;:02,
     &quot;name&quot;:&quot;mybatis&quot;
   },
   {
     &quot;id&quot;:03,
     &quot;name&quot;:&quot;spring&quot;
   }
 ]
}
}</code></pre>
<ul>
<li>K-V键值对、列簇、图表模型等</li>
<li>Redis 采用的是 K-V 模型存储数据的。</li>
</ul>
<h3 id="三、Redis"><a href="#三、Redis" class="headerlink" title="三、Redis"></a>三、Redis</h3><p>Redis 是一个 C 语言编写的、开源的、基于”内存”运行并支持持久化的、高性能的 NoSql 数据库，也是当前热门的 NoSql 数据库之一</p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li>1、支持持久化<ul>
<li>Redis 支持数据的持久化，可以将内存中的数据保持在磁盘中，重启的时候可以再次加载进行使用。</li>
</ul>
</li>
<li>2、支持多种数据结构<ul>
<li>Redis 不仅仅支持简单的 key-value 类型的数据，同时还提供 list，set，zset，hash 等数据结构的存储</li>
</ul>
</li>
<li>3、支持数据备份<ul>
<li>Redis 支持数据的备份，即 master-slave 模式的数据备份</li>
</ul>
</li>
</ul>
<hr>
<h2 id="二、Linux上安装Redis-服务端"><a href="#二、Linux上安装Redis-服务端" class="headerlink" title="二、Linux上安装Redis 服务端"></a>二、Linux上安装Redis 服务端</h2><h3 id="一、下载安装"><a href="#一、下载安装" class="headerlink" title="一、下载安装"></a>一、下载安装</h3><ul>
<li>1、下载 redis<ul>
<li>下载链接：<a href="http://redis.io/" target="_blank" rel="noopener">http://redis.io/</a></li>
</ul>
</li>
<li>2、使用 Xftp 工具上传 redis-5.0.2.tar.gz 到 linux 系统</li>
<li>3、解压 redis 到 /opt 目录</li>
<li>4、编译 redis，进入解压目录，并且执行 <strong>make</strong> 命令<ul>
<li>1、执行 make 命令需要先安装<strong>gcc</strong>；</li>
<li>2、<strong>gcc</strong> 是 GUN compiler collection 的缩写，是 linux 下的一个编译器集合，相当于 javac，是 C 或 C++程序的编译器<ul>
<li><strong>安装 gcc</strong>：<ul>
<li>方法1. 在有外网的情况下，使用 <strong>yum</strong> 进行安装：yum-y install gcc</li>
<li>方法2. 在没有外网的情况下，从光盘里进行安装<ul>
<li>a. 从终端进入目录：/run/media/root/CentOS 7x86_64/Packages</li>
<li>b. 依次执行命令：<ul>
<li>rpm -ivh libmpc-1.0.1-3.el7.x86_64.rpm 回车</li>
<li>rpm -ivh cpp-4.8.5-11.el7.x86_64.rpm 回车</li>
<li>rpm -ivh kernel-headers-3.10.0-514.el7.x86_64.rpm 回车</li>
<li>rpm -ivh glibc-headers-2.17-157.el7.x86_64.rpm 回车</li>
<li>rpm -ivh glibc-devel-2.17-157.el7.x86_64.rpm回车</li>
<li>rpm -ivh libgomp-4.8.5-11.el7.x86_64.rpm回车</li>
<li>rpm -ivh gcc-4.8.5-11.el7.x86_64.rpm回车</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>5、执行：<strong>gcc-v</strong> 查看 linux 内核版本，查看 gcc 是否安装好了</li>
<li>6、再次回到 redis 解压目录执行：<strong>make</strong> 命令进行编译</li>
<li>7、如果报错”文件未找到”，因为第一次执行 make 时生成了一些不完整文件。需要先清理，执行： <strong>make distclean</strong> 执行清理</li>
<li>8、再次进行：<strong>make</strong> 编译</li>
<li>9、执行：<strong>make install</strong>  <ul>
<li>执行这个命令，会把 redis 的安装目录下生成 redis 的一系列可执行文件都拷到 /usr/local/bin 目录下，这个 bin 目录已经配置到 PATH 环境变量里了。不用再去 redis 的 src 目录里面执行命令。在任何目录下都能执行这些 redis 的可执行命令</li>
</ul>
</li>
<li>10、可以 cd 到 src 目录查看 make 编译结果</li>
</ul>
<h3 id="二、启动-redis"><a href="#二、启动-redis" class="headerlink" title="二、启动 redis"></a>二、启动 redis</h3><h4 id="1、前台启动"><a href="#1、前台启动" class="headerlink" title="1、前台启动"></a>1、前台启动</h4><pre><code class="markdown">redis-server</code></pre>
<h4 id="2、后台启动"><a href="#2、后台启动" class="headerlink" title="2、后台启动"></a>2、后台启动</h4><pre><code class="markdown">redis-server &amp;</code></pre>
<h4 id="3、根据配置文件启动"><a href="#3、根据配置文件启动" class="headerlink" title="3、根据配置文件启动"></a>3、根据配置文件启动</h4><p><strong>启动命令 配置文件 &amp;</strong></p>
<pre><code class="markdown">redis-server redis.conf &amp;</code></pre>
<blockquote>
<p>注意：如果修改了 redis 的配置文件 redis.conf，必须在启动时指定配置文件，否则修改无效</p>
</blockquote>
<h3 id="三、关闭-redis"><a href="#三、关闭-redis" class="headerlink" title="三、关闭 redis"></a>三、关闭 redis</h3><h4 id="一、使用-Redis-客户端关闭"><a href="#一、使用-Redis-客户端关闭" class="headerlink" title="一、使用 Redis 客户端关闭"></a>一、使用 Redis 客户端关闭</h4><p>任意目录下执行</p>
<pre><code class="markdown">redis-cli shutdown</code></pre>
<p>推荐使用这种方式，redis 先完成数据操作，然后再关闭</p>
<p>如：</p>
<ul>
<li>ps -ef|grep redis：查看 redis 已经启动</li>
<li>redis-cli shutdown：通过客户端指令关闭 redis 服务</li>
<li>ps -ef|grep redis：查看 redis 已经关闭</li>
<li>redis 默认端口号：6379</li>
</ul>
<h4 id="二、kill-命令"><a href="#二、kill-命令" class="headerlink" title="二、kill 命令"></a>二、kill 命令</h4><p><strong>kill pid 或者 kill -9 pid</strong></p>
<blockquote>
<p>这种不会考虑当前应用是否有数据正在执行操作，直接就关闭应用，先使用 ps -ef|grep redis 查出进程号，再使用 kill -9 pid</p>
</blockquote>
<hr>
<h2 id="三、使用-Redis-客户端"><a href="#三、使用-Redis-客户端" class="headerlink" title="三、使用 Redis 客户端"></a>三、使用 Redis 客户端</h2><ul>
<li>Redis 客户端是一个程序，通过网络连接到 Redis 服务器，从而实现跟 Redis 服务器的交互。</li>
<li>Redis 客户端发送命令，同时显示 Redis 服务器的处理结果</li>
<li><code>redis-cli</code>:（Redis Command Line Interface）是 Redis 自带的基于命令行的 Redis 客户端，用于服务端交互，我们可以使用该客户端来执行 redis 的各种命令</li>
</ul>
<h3 id="一、步骤"><a href="#一、步骤" class="headerlink" title="一、步骤"></a>一、步骤</h3><ul>
<li>1、执行：<code>redis-server &amp;</code> ：启动 Redis 服务端</li>
<li>2、执行：<code>redis-cli</code>：启动 Redis 客户端，默认连接 127.0.0.1（本机）上的 6379 端口上的 redis 服务</li>
</ul>
<h3 id="二、连接指定端口-redis服务"><a href="#二、连接指定端口-redis服务" class="headerlink" title="二、连接指定端口 redis服务"></a>二、连接指定端口 redis服务</h3><p><strong>redis-cli -p 端口号</strong></p>
<blockquote>
<p>连接 127.0.0.1（本机）的指定端口上的 redis 服务</p>
</blockquote>
<h3 id="三、连接指定-ip-主机指定端口的-redis-服务"><a href="#三、连接指定-ip-主机指定端口的-redis-服务" class="headerlink" title="三、连接指定 ip 主机指定端口的 redis 服务"></a>三、连接指定 ip 主机指定端口的 redis 服务</h3><p><strong>redis-cli -h ip地址 -p 端口</strong></p>
<blockquote>
<p>连接指定 ip 主机上的指定端口的 redis 服务</p>
</blockquote>
<hr>
<h2 id="四、退出Redis客户端"><a href="#四、退出Redis客户端" class="headerlink" title="四、退出Redis客户端"></a>四、退出Redis客户端</h2><p>在客户端执行命令： <strong>exit</strong> 或 <strong>quit</strong></p>
<hr>
<h2 id="五、Redis-的基本知识"><a href="#五、Redis-的基本知识" class="headerlink" title="五、Redis 的基本知识"></a>五、Redis 的基本知识</h2><h3 id="1、-测试redis服务性能"><a href="#1、-测试redis服务性能" class="headerlink" title="1、 测试redis服务性能"></a>1、 测试redis服务性能</h3><pre><code class="markdown">redis-benchmark</code></pre>
<h3 id="2、查看-redis-服务是否正常执行"><a href="#2、查看-redis-服务是否正常执行" class="headerlink" title="2、查看 redis 服务是否正常执行"></a>2、查看 redis 服务是否正常执行</h3><pre><code class="markdown">ping</code></pre>
<blockquote>
<p>如果正常执行，响应 pong</p>
</blockquote>
<h3 id="3、查看-redis-服务器的统计信息"><a href="#3、查看-redis-服务器的统计信息" class="headerlink" title="3、查看 redis 服务器的统计信息"></a>3、查看 redis 服务器的统计信息</h3><pre><code class="markdown">info</code></pre>
<blockquote>
<ul>
<li>info : 查看 redis 服务的所有统计信息</li>
<li>info [信息段] : 查看redis 服务指定的统计信息<ul>
<li>如：info Replication ：查看集群的统计信息，比较常用</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="4、redis的数据库实例"><a href="#4、redis的数据库实例" class="headerlink" title="4、redis的数据库实例"></a>4、redis的数据库实例</h3><ul>
<li>作用类似于 mysql 的数据库实例，redis 中的数据库实例只能由 redis 服务来创建和维护，开发人员不能修改和自行创建数据库实例。</li>
<li>默认情况下，redis 会自动创建 16 个数据库实例，并且给这些数据库实例进行编号，从 0 开始，一直到 15，使用时通过编号来使用数据库。可以通过配置文件，指定 redis 自动创建的数据库个数。</li>
<li>redis 的每一个数据库实例本身占用的存储空间是很少的，所以也不会造成存储空间的太多浪费。</li>
<li>默认情况下，redis 客户端连接的是编号是 <strong>0</strong> 的数据库实例。</li>
</ul>
<h4 id="切换数据库实例"><a href="#切换数据库实例" class="headerlink" title="切换数据库实例"></a>切换数据库实例</h4><pre><code class="markdown">select index</code></pre>
<blockquote>
<p>如切换 1 号数据库：select 1</p>
</blockquote>
<h3 id="5、查看当前数据库实例中所有的key的数量"><a href="#5、查看当前数据库实例中所有的key的数量" class="headerlink" title="5、查看当前数据库实例中所有的key的数量"></a>5、查看当前数据库实例中所有的key的数量</h3><pre><code class="markdown">dbsize</code></pre>
<h3 id="6、查看当前数据库实例中所有的-key"><a href="#6、查看当前数据库实例中所有的-key" class="headerlink" title="6、查看当前数据库实例中所有的 key"></a>6、查看当前数据库实例中所有的 key</h3><pre><code class="markdown">keys</code></pre>
<h3 id="7、清空当前数据库实例"><a href="#7、清空当前数据库实例" class="headerlink" title="7、清空当前数据库实例"></a>7、清空当前数据库实例</h3><pre><code class="markdown">flushdb</code></pre>
<h3 id="8、清空所有的数据库实例"><a href="#8、清空所有的数据库实例" class="headerlink" title="8、清空所有的数据库实例"></a>8、清空所有的数据库实例</h3><pre><code class="markdown">flushall</code></pre>
<h3 id="9、查看redis配置信息"><a href="#9、查看redis配置信息" class="headerlink" title="9、查看redis配置信息"></a>9、查看redis配置信息</h3><h4 id="1、查看-redis-中所有的配置信息"><a href="#1、查看-redis-中所有的配置信息" class="headerlink" title="1、查看 redis 中所有的配置信息"></a>1、查看 redis 中所有的配置信息</h4><pre><code class="markdown">config get *</code></pre>
<h4 id="2、查看-redis-中的指定的配置信息"><a href="#2、查看-redis-中的指定的配置信息" class="headerlink" title="2、查看 redis 中的指定的配置信息"></a>2、查看 redis 中的指定的配置信息</h4><pre><code class="markdown">config get 参数</code></pre>
<blockquote>
<p>如：config get port ：查看 redis 端口号</p>
</blockquote>
<hr>
<h2 id="六、Redis-的五种数据结构"><a href="#六、Redis-的五种数据结构" class="headerlink" title="六、Redis 的五种数据结构"></a>六、Redis 的五种数据结构</h2><p>程序是用来处理数据的，Redis 是用来存储数据的，程序处理完的数据将来要存储到Redis 中，不同特点的数据要存储在 Redis 中不同类型的数据结构中。</p>
<h3 id="1、string"><a href="#1、string" class="headerlink" title="1、string"></a>1、string</h3><ul>
<li>单key : 单value</li>
</ul>
<h3 id="2、list"><a href="#2、list" class="headerlink" title="2、list"></a>2、list</h3><ul>
<li>单key : 多有序value</li>
</ul>
<h3 id="3、set"><a href="#3、set" class="headerlink" title="3、set"></a>3、set</h3><ul>
<li>单key : 多无序号value</li>
</ul>
<h3 id="4、zset"><a href="#4、zset" class="headerlink" title="4、zset"></a>4、zset</h3><ul>
<li>单key : 多有序value （可排序）</li>
</ul>
<h3 id="5、hash"><a href="#5、hash" class="headerlink" title="5、hash"></a>5、hash</h3><ul>
<li>单key ：对象(属性:值)</li>
<li>如：studentzs id 1001 name zhangsan age 29</li>
</ul>
<hr>
<h2 id="七、Redis-中的操作命令"><a href="#七、Redis-中的操作命令" class="headerlink" title="七、Redis 中的操作命令"></a>七、Redis 中的操作命令</h2><h3 id="一、有关key的操作命令"><a href="#一、有关key的操作命令" class="headerlink" title="一、有关key的操作命令"></a>一、有关key的操作命令</h3><h4 id="1、查看数据库中的-key"><a href="#1、查看数据库中的-key" class="headerlink" title="1、查看数据库中的 key"></a>1、查看数据库中的 key</h4><pre><code class="markdown">keys pattern</code></pre>
<ul>
<li><code>*</code>:<strong>匹配 0 个或多个字符</strong>  <ul>
<li><strong>keys k*</strong>：查看数据库中所有以 k 开头的 key </li>
<li><strong><em>keys h*o\</em></strong>：查看数据库中所有以 h 开头，以 o 结尾的 key</li>
</ul>
</li>
<li><code>?</code>:<strong>匹配一个字符</strong> <ul>
<li><strong>keys h?o</strong>：查看数据库中所有以 h 开头，以 o 结尾的，并且中间只有一个字符的 key</li>
</ul>
</li>
<li><code>[ ]</code>:<strong>匹配 [ ] 里的一个字符</strong><ul>
<li><strong>keys h[abc]llo</strong>：查看数据库中所有以 h 开头、以 llo 结尾，并且 h 后面只能取 abc 中的一个字符的 key</li>
</ul>
</li>
</ul>
<h4 id="2、判断-key-在数据库中是否存在"><a href="#2、判断-key-在数据库中是否存在" class="headerlink" title="2、判断 key 在数据库中是否存在"></a>2、判断 key 在数据库中是否存在</h4><pre><code class="markdown">exists key</code></pre>
<ul>
<li>如果存在，则返回 <strong>1</strong></li>
<li>如果不存在，则返回 <strong>0</strong></li>
</ul>
<blockquote>
<p>例：</p>
<p><strong>exists k1</strong>：判断数据库中是否存在 k1 这个 key </p>
</blockquote>
<pre><code class="markdown">exists key1 [key2 key3 ......]</code></pre>
<ul>
<li>一次判断多个 key 在数据库中是否存在，返回值是存在的 key 的数量</li>
</ul>
<blockquote>
<p>例：</p>
<p><strong>exists k1 k2 k3 hello</strong> ：判断这些指定的 key 是否存在，返回的是存在的 key 的数量 </p>
</blockquote>
<h4 id="3、移动指定-key-到指定的数据库实例"><a href="#3、移动指定-key-到指定的数据库实例" class="headerlink" title="3、移动指定 key 到指定的数据库实例"></a>3、移动指定 key 到指定的数据库实例</h4><pre><code class="markdown">move key index</code></pre>
<ul>
<li>不常用</li>
</ul>
<blockquote>
<p>例：</p>
<p><strong>move k1 1</strong> ：将 k1 这个 key 移动到 1 号数据库实例中 </p>
</blockquote>
<h4 id="4、查看指定-key-的剩余生存时间"><a href="#4、查看指定-key-的剩余生存时间" class="headerlink" title="4、查看指定 key 的剩余生存时间"></a>4、查看指定 key 的剩余生存时间</h4><pre><code class="markdown">ttl key</code></pre>
<ul>
<li>ttl 是 time to live 的缩写，生存时间</li>
<li>如果 key 没有设置生存时间，返回 <strong>-1</strong></li>
<li>如果 key 不存在，返回 <strong>-2</strong></li>
</ul>
<blockquote>
<p>例：</p>
<p><strong>ttl k1</strong> ：查看 k1 这个 key 的剩余生存时间 </p>
</blockquote>
<h4 id="5、设置指定-key-的最大生存时间"><a href="#5、设置指定-key-的最大生存时间" class="headerlink" title="5、设置指定 key 的最大生存时间"></a>5、设置指定 key 的最大生存时间</h4><pre><code class="markdown">expire key seconds</code></pre>
<ul>
<li>单位是秒</li>
</ul>
<blockquote>
<p>例：</p>
<p><code>expire k2 20</code> ：给 k2 这个 key 设置生存时间为 20 秒</p>
</blockquote>
<h4 id="6、查看指定-key-的数据类型"><a href="#6、查看指定-key-的数据类型" class="headerlink" title="6、查看指定 key 的数据类型"></a>6、查看指定 key 的数据类型</h4><pre><code class="markdown">type key</code></pre>
<blockquote>
<p>例：</p>
<p><strong>type k1</strong> ：查看 k1 这个 key 的数据类型</p>
</blockquote>
<h4 id="7、重命名-key"><a href="#7、重命名-key" class="headerlink" title="7、重命名 key"></a>7、重命名 key</h4><pre><code class="mark">rename key newkey</code></pre>
<blockquote>
<p>例：</p>
<p><strong>rename k1 hello</strong>：将 k1 这个 key 重命名为 hello </p>
</blockquote>
<h4 id="8、删除指定的-key"><a href="#8、删除指定的-key" class="headerlink" title="8、删除指定的 key"></a>8、删除指定的 key</h4><pre><code class="markdown">del key [key key ...]</code></pre>
<ul>
<li>返回值是实际删除的 key 的数量</li>
<li>如果 key 不存在会忽略</li>
</ul>
<blockquote>
<p>例：</p>
<p><strong>del k1 k2 k3</strong> ：删除 k1 k2 k3 这三个 key </p>
</blockquote>
<h3 id="二、关于-Redis-中五种数据类型的操作命令"><a href="#二、关于-Redis-中五种数据类型的操作命令" class="headerlink" title="二、关于 Redis 中五种数据类型的操作命令"></a>二、关于 Redis 中五种数据类型的操作命令</h3><h4 id="1、string-1"><a href="#1、string-1" class="headerlink" title="1、string"></a>1、string</h4><ul>
<li>string类型数据特点<ul>
<li><strong>单key-单value</strong> </li>
</ul>
</li>
</ul>
<h5 id="INSERT相关"><a href="#INSERT相关" class="headerlink" title="INSERT相关"></a>INSERT相关</h5><h6 id="1、将-string-类型的数据设置到-redis-中"><a href="#1、将-string-类型的数据设置到-redis-中" class="headerlink" title="1、将 string 类型的数据设置到 redis 中"></a>1、将 string 类型的数据设置到 redis 中</h6><pre><code class="markdown">set key value</code></pre>
<blockquote>
<p>例：</p>
<ul>
<li><p><em>set zsname zhangsan</em> </p>
</li>
<li><p><em>set zsage 20</em> </p>
</li>
<li><p><em>set totalRows 100</em> </p>
</li>
</ul>
</blockquote>
<h6 id="2、追加字符串"><a href="#2、追加字符串" class="headerlink" title="2、追加字符串"></a>2、追加字符串</h6><pre><code class="markdown">append key value</code></pre>
<ul>
<li>返回追加之后的字符串长度</li>
<li>如果 key 不存在，则新创建一个 key，并且把 value 值设置为该追加的 value</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>set phone 134281</em> </p>
<p><em>append phone 88910</em> </p>
<ul>
<li>表示往 phone 这个 key 上追加 88910 字符串，此时 phone 这个 key 的 value 为 13428188910</li>
</ul>
</blockquote>
<h6 id="3、设置字符串数据的同时，设置它的最大生命周期"><a href="#3、设置字符串数据的同时，设置它的最大生命周期" class="headerlink" title="3、设置字符串数据的同时，设置它的最大生命周期"></a>3、设置字符串数据的同时，设置它的最大生命周期</h6><pre><code class="markdown">setex key seconds value</code></pre>
<ul>
<li>ex 是 expire 缩写，生存</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>setex time 20 play</em>  ：设置 time 这个 key 的 value 值为 play，并且设置其最大生命周期为 20 秒 </p>
</blockquote>
<h6 id="4、设置-string-类型的数据-value-到-redis-数据库，当-key-不存在时设置成功。若存在则放弃设置"><a href="#4、设置-string-类型的数据-value-到-redis-数据库，当-key-不存在时设置成功。若存在则放弃设置" class="headerlink" title="4、设置 string 类型的数据 value 到 redis 数据库，当 key 不存在时设置成功。若存在则放弃设置"></a>4、设置 string 类型的数据 value 到 redis 数据库，当 key 不存在时设置成功。若存在则放弃设置</h6><pre><code class="markdown">setnx key value</code></pre>
<ul>
<li>nx 表示 no exists ，不存在</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>setnx zsage 20</em>  ： 当数据库中 zsage 这个 key 不存在时，设置 zsage 这个 key 的 value 为 20 。若存在则放弃设置</p>
</blockquote>
<h6 id="5、批量将-string-类型的数据设置到-redis-中"><a href="#5、批量将-string-类型的数据设置到-redis-中" class="headerlink" title="5、批量将 string 类型的数据设置到 redis 中"></a>5、批量将 string 类型的数据设置到 redis 中</h6><pre><code class="markdown">mset key1 value1 key2 value2</code></pre>
<ul>
<li>m 是 multi，多</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>mset k1 v111 k2 v222 k3 v333</em> </p>
</blockquote>
<h6 id="6、批量将-string-类型的数据-value-设置到-redis-数据库中，当所有-key-不存在时设置成功，否则，只要有一个-key-已经存在，则放弃设置"><a href="#6、批量将-string-类型的数据-value-设置到-redis-数据库中，当所有-key-不存在时设置成功，否则，只要有一个-key-已经存在，则放弃设置" class="headerlink" title="6、批量将 string 类型的数据 value 设置到 redis 数据库中，当所有 key 不存在时设置成功，否则，只要有一个 key 已经存在，则放弃设置"></a>6、批量将 string 类型的数据 value 设置到 redis 数据库中，当所有 key 不存在时设置成功，否则，只要有一个 key 已经存在，则放弃设置</h6><pre><code class="markdown">msetnx key1 value1 key2 value2 .....</code></pre>
<blockquote>
<p>例：</p>
<p><em>msetnx k4 lili k5 lianglili</em> ：批量将 k4 k5 这两个 key 的 value设置到 redis 数据库中，当两个 key 都不存在时设置成功</p>
</blockquote>
<h5 id="DELETE相关"><a href="#DELETE相关" class="headerlink" title="DELETE相关"></a>DELETE相关</h5><h6 id="1、删除指定的-key-value-也会对应被删除"><a href="#1、删除指定的-key-value-也会对应被删除" class="headerlink" title="1、删除指定的 key , value 也会对应被删除"></a>1、删除指定的 key , value 也会对应被删除</h6><pre><code class="markdown">del key [key key ...]</code></pre>
<ul>
<li>返回值是实际删除的 key 的数量</li>
<li>如果 key 不存在会忽略</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>del k1 k2 k3</em> ：删除 k1 k2 k3 这三个 key</p>
</blockquote>
<h5 id="UPDATE相关"><a href="#UPDATE相关" class="headerlink" title="UPDATE相关"></a>UPDATE相关</h5><h6 id="1、将字符串数值进行加-1-运算"><a href="#1、将字符串数值进行加-1-运算" class="headerlink" title="1、将字符串数值进行加 1 运算"></a>1、将字符串数值进行加 1 运算</h6><pre><code class="markdown">incr key</code></pre>
<ul>
<li>返回加 1 运算之后的数据</li>
<li>如果 key 不存在，首先设置一个 key，初始化为 0，返回进行 <strong>incr</strong>运算结果为 1</li>
<li>要求 key 所表示的 value 必须是数值，否则报错</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>incr zsage</em> ：将 zsage 的字符串数值加 1，比如 zsage 的 value 原本是 30，incr zsage 后变成 31</p>
<p><em>incr age</em> ：age 如果不存在，会先将值初始化为 0，然后进行 incr 运算变成 1</p>
<p>incr zsname ：报错</p>
</blockquote>
<h6 id="2、将字符数值进行减-1-运算"><a href="#2、将字符数值进行减-1-运算" class="headerlink" title="2、将字符数值进行减 1 运算"></a>2、将字符数值进行减 1 运算</h6><pre><code class="markdown">decr key</code></pre>
<ul>
<li>返回减 1 运算之后的数据</li>
<li>如果 key 不存在，首先设置一个 key，值初始化为 0 ，然后进行 <strong>decr</strong> 运算</li>
<li>要求 key 所表示的 value 必须是数值，否则报错</li>
</ul>
<h6 id="3、将字符串数值进行加-offset-运算"><a href="#3、将字符串数值进行加-offset-运算" class="headerlink" title="3、将字符串数值进行加 offset 运算"></a>3、将字符串数值进行加 offset 运算</h6><pre><code class="markdown">incrby key offset</code></pre>
<ul>
<li>offset 表示偏移量</li>
<li>返回加 offset 运算之后的数据</li>
<li>如果 key 不存在，首先设置一个 key，值初始化为 0 ，然后进行 incrby 运算</li>
<li>要求 key 所表示的 value 必须是数值，否则报错</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>incrby zsage 10</em> ：对 key 为 zsage 的 value 值年龄进行加 10 运算</p>
</blockquote>
<h6 id="4、将字符串数值进行减-offset-运算"><a href="#4、将字符串数值进行减-offset-运算" class="headerlink" title="4、将字符串数值进行减 offset 运算"></a>4、将字符串数值进行减 offset 运算</h6><pre><code class="markdown">decrby key offset</code></pre>
<ul>
<li>offset 表示偏移量</li>
<li>返回减 offset 运算之后的数据</li>
<li>如果 key 不存在，首先设置一个 key，值初始化为 0 ，然后进行 decrby 运算</li>
<li>要求 key 所表示的 value 必须是数值，否则报错</li>
</ul>
<blockquote>
<p><em>decrby zsage 10</em> ：对 key 为 zsage 的 value 值年龄进行减 10 运算</p>
</blockquote>
<h6 id="5、用-value-覆盖从下标-startIndex-开始的字符串"><a href="#5、用-value-覆盖从下标-startIndex-开始的字符串" class="headerlink" title="5、用 value 覆盖从下标 startIndex 开始的字符串"></a>5、用 value 覆盖从下标 startIndex 开始的字符串</h6><pre><code class="markdown">setrange key startIndex value</code></pre>
<ul>
<li>能覆盖几个字符就覆盖字符</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>setrange zsname  5 xiaosan</em> ：将 zsname 这个 key 的 value 字符串（zhangsan），从下标 5 开始，用 xiaosan 覆盖</p>
<ul>
<li>结果为：zhangxiaosan</li>
</ul>
<p><em>setrange zsname 5 lao</em> ：将 zsname 这个 key 的 value 字符串（zhangxiaosan），从下标 5 开始，用 lao 覆盖</p>
<ul>
<li>结果为：zhanglaoosan</li>
</ul>
</blockquote>
<h5 id="QUERY相关"><a href="#QUERY相关" class="headerlink" title="QUERY相关"></a>QUERY相关</h5><h6 id="1、从-redis-中获取-string-类型的数据"><a href="#1、从-redis-中获取-string-类型的数据" class="headerlink" title="1、从 redis 中获取 string 类型的数据"></a>1、从 redis 中获取 string 类型的数据</h6><pre><code class="markdown">get key</code></pre>
<blockquote>
<p>例：</p>
<p><em>get zsname</em></p>
<p><em>get zsage</em></p>
<p><em>get totalRows</em></p>
</blockquote>
<h6 id="2、获取字符串数据的长度"><a href="#2、获取字符串数据的长度" class="headerlink" title="2、获取字符串数据的长度"></a>2、获取字符串数据的长度</h6><pre><code class="markdown">strlen key</code></pre>
<blockquote>
<p>例：</p>
<p><em>strlen</em> phone ：获取 phone 这个 key 的 value 字符串数据值的长度</p>
</blockquote>
<h6 id="3、闭区间获取字符串-key-中从-startIndex-到-endIndex-的字符组成子字符串"><a href="#3、闭区间获取字符串-key-中从-startIndex-到-endIndex-的字符组成子字符串" class="headerlink" title="3、闭区间获取字符串 key 中从 startIndex 到 endIndex 的字符组成子字符串"></a>3、闭区间获取字符串 key 中从 startIndex 到 endIndex 的字符组成子字符串</h6><pre><code class="markdown">getrange key startIndex endIndex</code></pre>
<ul>
<li>只是获取，不影响数据库里的数据</li>
<li>下标自左至右从 0 开始，依次往后，最后一个字符的下标是字符串长度 -1</li>
<li>字符串中每一个下标也可以是负数，负下标表示自右至左，从 -1 开始，依次往前，最右边一个字符的下标是 -1</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>set zsname zhangsan</em> ：如 zhangsan 这个 value，n 这个字符：从左往右下标是 7，从右往左下标是 -1； a 这个字符，从左往右下标是 6，从右往左下标是 -2</p>
<p><em>getrange zsname 2 5</em> ：截取key 为 zsname的字符串 zhangsan 从下标为 2 开始到下标为 5 的字符；结果为：angs</p>
<p><em>getrange zsname 2 -3</em> ：截取key 为 zsname的字符串 zhangsan 从下标为 2 开始到下标为 -3 的字符 –&gt; 结果为：angs 下标为 2，从左往右是 a；下标为-3，从右往左是 s</p>
<p><strong><em>getrange zsname 0 -1</em></strong> : 获取全部</p>
</blockquote>
<h6 id="4、批量从-redis-中获取-string-类型的数据"><a href="#4、批量从-redis-中获取-string-类型的数据" class="headerlink" title="4、批量从 redis 中获取 string 类型的数据"></a>4、批量从 redis 中获取 string 类型的数据</h6><pre><code class="markdown">mget key1 key2 key3 ..</code></pre>
<blockquote>
<p>例：</p>
<p><em>mget k1 k2 name k3 age</em> ：批量获取k1 k2 name k3 age 这几个 key 的 value 值</p>
</blockquote>
<h4 id="2、list-1"><a href="#2、list-1" class="headerlink" title="2、list"></a>2、list</h4><h5 id="list-类型数据特点"><a href="#list-类型数据特点" class="headerlink" title="list 类型数据特点"></a>list 类型数据特点</h5><ul>
<li>单key-多有序value<ul>
<li>一个 key 对应多个 value；</li>
<li>多个 value 之间有顺序，最左侧是表头，最右侧是表尾；</li>
<li>每一个元素都有下标，表头元素的下标是 0，依次往后排序，最后一个元素下标是列表长度 -1 ；</li>
<li>每一个元素的下标又可以用负数表示，负下标表示从表尾计算，最后一个元素下标用 -1 表示；</li>
<li>元素在列表中的顺序或者下标由放入的顺序来绝决定</li>
<li>通过 key 和下标来操作数据。</li>
</ul>
</li>
</ul>
<h5 id="INSERT相关-1"><a href="#INSERT相关-1" class="headerlink" title="INSERT相关"></a>INSERT相关</h5><h6 id="1、将一个或者多个值依次插入到列表的表头-左侧"><a href="#1、将一个或者多个值依次插入到列表的表头-左侧" class="headerlink" title="1、将一个或者多个值依次插入到列表的表头(左侧)"></a>1、将一个或者多个值依次插入到列表的表头(左侧)</h6><pre><code class="markdown">lpush key value [value value ......]</code></pre>
<ul>
<li>头插法，插入左侧表头</li>
<li>l 表示left，左</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>lpush list01 1 2 3</em> ：往 key 为 list01 的列表中插入 1 ，2 ，3 这三个数据 –&gt; 插入结果为 3 2 1 ，依次插入到表头</p>
</blockquote>
<h6 id="2、将一个或者多个值依次插入到列表的表尾-右侧"><a href="#2、将一个或者多个值依次插入到列表的表尾-右侧" class="headerlink" title="2、将一个或者多个值依次插入到列表的表尾(右侧)"></a>2、将一个或者多个值依次插入到列表的表尾(右侧)</h6><pre><code class="markdown">rpush key value [value value ......]</code></pre>
<ul>
<li>尾插法，插入右侧表尾</li>
<li>r 表示 right，右</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>rpush list02 a b c</em> ： 往 key 为 list02 的列表中插入 a，b，c 这三个数据 –&gt; 插入结果为 a b c ，依次插入到表尾</p>
</blockquote>
<h6 id="3、将-value-插入到指定列表中位于-pivot-元素之前-之后的位置"><a href="#3、将-value-插入到指定列表中位于-pivot-元素之前-之后的位置" class="headerlink" title="3、将 value 插入到指定列表中位于 pivot 元素之前 /之后的位置"></a>3、将 value 插入到指定列表中位于 pivot 元素之前 /之后的位置</h6><pre><code class="markdown">linsert key before/after pivot value</code></pre>
<blockquote>
<p>例：</p>
<p><em>linsert list04 before 10 50</em> ：将 value 值 50 插入到 key 为 list04（4 10 2） 的列表中元素10之前</p>
<ul>
<li>结果为：4 50 10 2</li>
</ul>
<p><em>linsert list04 after 10 60</em> ： 将 value 值 60 插入到 key 为 list04（4 50 10 2） 的列表中元素10之后</p>
<ul>
<li>结果为：4 50 10 60 2</li>
</ul>
</blockquote>
<h5 id="DELETE相关-1"><a href="#DELETE相关-1" class="headerlink" title="DELETE相关"></a>DELETE相关</h5><h6 id="1、从指定列表中移除并且返回表头元素"><a href="#1、从指定列表中移除并且返回表头元素" class="headerlink" title="1、从指定列表中移除并且返回表头元素"></a>1、从指定列表中移除并且返回表头元素</h6><pre><code class="markdown">lpop key</code></pre>
<blockquote>
<p>例：</p>
<p><em>lpop list02</em> ：从 key 为 list02（n m a b c d e） 的列表中移除并返回表头的元素</p>
<ul>
<li>结果为：n</li>
</ul>
</blockquote>
<h6 id="2、从指定列表中移除并且返回表尾元素"><a href="#2、从指定列表中移除并且返回表尾元素" class="headerlink" title="2、从指定列表中移除并且返回表尾元素"></a>2、从指定列表中移除并且返回表尾元素</h6><pre><code class="markdown">rpop key</code></pre>
<blockquote>
<p>例：</p>
<p><em>rpop list02</em> ：从 key 为 list02（m a b c d e） 的列表中移除并返回表尾的元素</p>
<ul>
<li>结果为：e</li>
</ul>
</blockquote>
<h6 id="3、根据-count值-移除指定列表中跟-value-相等的数据"><a href="#3、根据-count值-移除指定列表中跟-value-相等的数据" class="headerlink" title="3、根据 count值 移除指定列表中跟 value 相等的数据"></a>3、根据 count值 移除指定列表中跟 value 相等的数据</h6><pre><code class="markdown">lrem key conut value</code></pre>
<ul>
<li>1、<strong>count&gt;0</strong> : 从列表的左侧移除 count个 跟 value 相等的数据</li>
<li>2、<strong>count&lt;0</strong> : 从列表的右侧移除 count 个跟 value 相等的数据</li>
<li>3、<strong>count=0</strong> : 从列表中移除所有跟 value 相等的数据</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>lpush list03 a a b c a d e a b b</em>：往 list03 列表表头依次添加这些元素</p>
<ul>
<li>结果：b b a e d a c b a a</li>
</ul>
<p><em>lrem list03 2 a</em></p>
<ul>
<li>count&gt;0</li>
<li>从 key 为 list03（b b a e d a c b a a） 的列表的左侧移除 2 个跟 a 相等的元素<ul>
<li>结果为： b b e d c b a a</li>
</ul>
</li>
</ul>
<p><em>lrem list03 -1 a</em></p>
<ul>
<li>count&lt;0</li>
<li>从 key 为 list03（b b e d c b a a）的列表的右侧移除 1 个 跟 a 相等的元素<ul>
<li>结果为：b b e d c b a</li>
</ul>
</li>
</ul>
<p>lrem list03 0 a</p>
<ul>
<li>count=0</li>
<li>从 key 为 list03（b b e d c b a）的列表中移除所有的 a<ul>
<li>结果为：b b e d c b</li>
</ul>
</li>
</ul>
</blockquote>
<h5 id="UPDATE相关-1"><a href="#UPDATE相关-1" class="headerlink" title="UPDATE相关"></a>UPDATE相关</h5><h6 id="1、截取指定列表中指定下标区间的元素组成新的列表，并且赋值给-key"><a href="#1、截取指定列表中指定下标区间的元素组成新的列表，并且赋值给-key" class="headerlink" title="1、截取指定列表中指定下标区间的元素组成新的列表，并且赋值给 key"></a>1、截取指定列表中指定下标区间的元素组成新的列表，并且赋值给 key</h6><pre><code class="markdown">ltrim key startIndex endIndex</code></pre>
<blockquote>
<p>例：</p>
<p>lpush list04 1 2 3 4 5</p>
<ul>
<li>结果： 5 4 3 2 1</li>
</ul>
<p><em>ltrim list04 1 3</em> : 截取 key 为 list04 这个列表中下标 1 到 3 的元素组成新的列表，并且赋值给 list04 这个 key</p>
<ul>
<li>lrange list04 0 -1 ： 查看列表全部元素，结果为4 3 2</li>
</ul>
</blockquote>
<h6 id="2、将指定列表中指定下标的元素设置为指定值"><a href="#2、将指定列表中指定下标的元素设置为指定值" class="headerlink" title="2、将指定列表中指定下标的元素设置为指定值"></a>2、将指定列表中指定下标的元素设置为指定值</h6><pre><code class="markdown">lset key index value</code></pre>
<blockquote>
<p>例：</p>
<p><em>lset list04 1 10</em>：将 key 为 list04（4 3 2）的列表下标为 1 的 value 值设置为 10</p>
<ul>
<li>lrange list04 0 -1<ul>
<li>结果为：4 10 2</li>
</ul>
</li>
</ul>
</blockquote>
<h6 id="QUERY相关-1"><a href="#QUERY相关-1" class="headerlink" title="QUERY相关"></a>QUERY相关</h6><h6 id="1、获取指定列表中指定下标区间的元素"><a href="#1、获取指定列表中指定下标区间的元素" class="headerlink" title="1、获取指定列表中指定下标区间的元素"></a>1、获取指定列表中指定下标区间的元素</h6><pre><code class="markdown">lrange key startIndex endIndex</code></pre>
<ul>
<li>l 表示 list</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>lrange list01 1 3</em> ：获取 key 为 list01（5 4 3 2 1） 的列表中下标为 1 到 2 区间的元素 </p>
<ul>
<li>结果为：4 3 2 </li>
</ul>
<p><em>lrange list01 0 -1*</em> ：获取全部</p>
<ul>
<li>结果为：5 4 3 2 1</li>
</ul>
</blockquote>
<h6 id="2、获取指定列表中指定下标的元素"><a href="#2、获取指定列表中指定下标的元素" class="headerlink" title="2、获取指定列表中指定下标的元素"></a>2、获取指定列表中指定下标的元素</h6><pre><code class="markdown">lindex key index</code></pre>
<blockquote>
<p>例：</p>
<p><em>lindex list01 2</em>：获取 key 为 list01（5 4 3 2 1） 的列表中下标为 2 的元素</p>
<ul>
<li>结果为： 3</li>
</ul>
</blockquote>
<h6 id="3、获取指定列表的长度"><a href="#3、获取指定列表的长度" class="headerlink" title="3、获取指定列表的长度"></a>3、获取指定列表的长度</h6><pre><code class="markdown">llen key</code></pre>
<blockquote>
<p>例：</p>
<p><em>llen list01</em> ：获取 key 为 list01 的列表的长度</p>
</blockquote>
<h4 id="3、set-1"><a href="#3、set-1" class="headerlink" title="3、set"></a>3、set</h4><h5 id="set-类型数据特点"><a href="#set-类型数据特点" class="headerlink" title="set 类型数据特点"></a>set 类型数据特点</h5><ul>
<li>单key-多无序value<ul>
<li>一个 key 对应多个 value</li>
<li>value 之间没有顺序，并且不能重复</li>
<li>通过业务数据直接操作集合</li>
</ul>
</li>
</ul>
<h5 id="INSERT相关-2"><a href="#INSERT相关-2" class="headerlink" title="INSERT相关"></a>INSERT相关</h5><h6 id="1、将一个或者多个元素添加到指定集合中"><a href="#1、将一个或者多个元素添加到指定集合中" class="headerlink" title="1、将一个或者多个元素添加到指定集合中"></a>1、将一个或者多个元素添加到指定集合中</h6><pre><code class="markdown">sadd key value [value value ......]</code></pre>
<ul>
<li>如果元素已经存在则会忽略</li>
<li>返回成功加入的元素的个数</li>
<li><em>sadd set01 a b c</em> : 往 key 为 set01 的集合中加入 a b c 元素</li>
<li><em>sadd set01 b d e</em> : 结果只有 a b c d e 五个元素,set 集合元素不可重复</li>
</ul>
<h6 id="DELETE相关-2"><a href="#DELETE相关-2" class="headerlink" title="DELETE相关"></a>DELETE相关</h6><h6 id="1、移除指定集合中一个或者多个元素"><a href="#1、移除指定集合中一个或者多个元素" class="headerlink" title="1、移除指定集合中一个或者多个元素"></a>1、移除指定集合中一个或者多个元素</h6><pre><code class="markdown">srem key member [member member ......]</code></pre>
<ul>
<li>不存在的元素会被忽略</li>
<li>返回成功移除的个数</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>srem set01 b d m</em> : 移除 set01 集合中 b d m 元素，m 不存在会忽略，返回成功移除的个数</p>
</blockquote>
<h6 id="2、从指定集合中随机移除一个或者多个元素"><a href="#2、从指定集合中随机移除一个或者多个元素" class="headerlink" title="2、从指定集合中随机移除一个或者多个元素"></a>2、从指定集合中随机移除一个或者多个元素</h6><pre><code class="markdown">spop key [count]</code></pre>
<blockquote>
<p>例：</p>
<p><em>spop set02</em>：从 set02 集合中随机移除一个元素</p>
<p>spop set02 3：从 set02 集合中随机移除 3 个元素</p>
</blockquote>
<h5 id="UPDATE相关-2"><a href="#UPDATE相关-2" class="headerlink" title="UPDATE相关"></a>UPDATE相关</h5><h6 id="1、将指定集合中的指定元素移动到另一个集合"><a href="#1、将指定集合中的指定元素移动到另一个集合" class="headerlink" title="1、将指定集合中的指定元素移动到另一个集合"></a>1、将指定集合中的指定元素移动到另一个集合</h6><pre><code class="markdown">smove source dest member</code></pre>
<blockquote>
<p>例：</p>
<p>source 表示源集合，desy 表示目标集合</p>
<p><em>smove set01 set02 a</em> ：将元素 a 从 set01 集合移动到 set02 集合中</p>
</blockquote>
<h5 id="QUERY相关-2"><a href="#QUERY相关-2" class="headerlink" title="QUERY相关"></a>QUERY相关</h5><h6 id="1、获取指定集合中所有的元素"><a href="#1、获取指定集合中所有的元素" class="headerlink" title="1、获取指定集合中所有的元素"></a>1、获取指定集合中所有的元素</h6><pre><code class="markdown">smembers key</code></pre>
<ul>
<li>member 表示成员</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>smembers set01</em> ：获取 key 为 set01 的集合的所有元素</p>
</blockquote>
<h6 id="2、判断指定元素在指定集合中是否存在"><a href="#2、判断指定元素在指定集合中是否存在" class="headerlink" title="2、判断指定元素在指定集合中是否存在"></a>2、判断指定元素在指定集合中是否存在</h6><pre><code class="markdown">sismember key member</code></pre>
<ul>
<li>存在返回 1</li>
<li>不存在返回 0</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>sismember set01 f</em> ：判断 f 元素是否在 set01 这个集合中存在</p>
</blockquote>
<h6 id="3、获取指定集合的长度"><a href="#3、获取指定集合的长度" class="headerlink" title="3、获取指定集合的长度"></a>3、获取指定集合的长度</h6><pre><code class="markdown">scard key</code></pre>
<blockquote>
<p>例：</p>
<p><em>scard set01</em> ：获取 set01 这个集合的长度</p>
</blockquote>
<h6 id="4、随机获取指定集合中的一个或者多个元素"><a href="#4、随机获取指定集合中的一个或者多个元素" class="headerlink" title="4、随机获取指定集合中的一个或者多个元素"></a>4、随机获取指定集合中的一个或者多个元素</h6><pre><code class="markdown">srandmember key [count]</code></pre>
<ul>
<li><strong>count&gt;0</strong> ：随机获取的多个元素之间不能重复</li>
<li><strong>count&lt;0</strong> :  随机获取的多个元素之间可能重复 </li>
</ul>
<blockquote>
<p>例：</p>
<p><em>sadd set02</em> 1 2 3 4 5 6 7 8 : 往 set02 集合里添加元素</p>
<p><em>srandmember set02</em>  ： 从 set02 集合中随机获取一个元素</p>
<p><em>srandmember set02 3</em>  ： count&gt;0 ,从 set02 集合中随机获取 3 个不重复的元素<br><em>srandmember set02 -3</em>  ：count&lt;0 ,从 set02 集合中随机获取 3 个元素，有可能重复</p>
</blockquote>
<h6 id="5、获取第一个集合中有、但是其它集合中都没有的元素组成的新集合（差集）"><a href="#5、获取第一个集合中有、但是其它集合中都没有的元素组成的新集合（差集）" class="headerlink" title="5、获取第一个集合中有、但是其它集合中都没有的元素组成的新集合（差集）"></a>5、获取第一个集合中有、但是其它集合中都没有的元素组成的新集合（差集）</h6><pre><code class="markdown">sdiff key key [key key ...]</code></pre>
<ul>
<li>差集：difference set</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>sdiff set01 set02 set03</em> : 获取 set01（如 c e d） 集合中有的，set02（1 2 a 5） 和 set03（e m n） 集合中都没有的元素组成的集合</p>
<ul>
<li>结果为： c d </li>
</ul>
</blockquote>
<h6 id="6、获取所有指定集合中都有的元素组成的新集合（交集）"><a href="#6、获取所有指定集合中都有的元素组成的新集合（交集）" class="headerlink" title="6、获取所有指定集合中都有的元素组成的新集合（交集）"></a>6、获取所有指定集合中都有的元素组成的新集合（交集）</h6><pre><code class="markdown">sinter key key [key key ...]</code></pre>
<ul>
<li>交集：intersection</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>sinter set01 set02 set03</em> : 获取 set01 ，set02 ，set03 三个集合中都有的元素组成的新集合 </p>
</blockquote>
<h6 id="7、获取所有指定集合中所有元素组成的大集合（并集）"><a href="#7、获取所有指定集合中所有元素组成的大集合（并集）" class="headerlink" title="7、获取所有指定集合中所有元素组成的大集合（并集）"></a>7、获取所有指定集合中所有元素组成的大集合（并集）</h6><pre><code class="markdown">sunion key key [key key ...]</code></pre>
<ul>
<li>并集：union</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>sunion set01 set02 set03</em> : 获取 set01（如 a b c） ，set02（如 c d e f） ，set03（如 g l z） 三个集合中所有元素组成的大集合</p>
<ul>
<li>结果为：a b c d e f g l z (无序的)</li>
</ul>
</blockquote>
<h4 id="4、-hash"><a href="#4、-hash" class="headerlink" title="4、 hash"></a>4、 hash</h4><h5 id="hash-类型数据特点"><a href="#hash-类型数据特点" class="headerlink" title="hash 类型数据特点"></a>hash 类型数据特点</h5><ul>
<li>单 key : field-value field-value …<ul>
<li>特别适合存储对象，key 是数据标识，field 是域，value 是我们感兴趣的业务数据</li>
<li>如： studentzs : id-1001 name-zhangsan age-20 这种数据</li>
</ul>
</li>
</ul>
<h5 id="INSERT相关-3"><a href="#INSERT相关-3" class="headerlink" title="INSERT相关"></a>INSERT相关</h5><h6 id="1、将一个或者多个-field-value-对设置到哈希表中"><a href="#1、将一个或者多个-field-value-对设置到哈希表中" class="headerlink" title="1、将一个或者多个 field-value 对设置到哈希表中"></a>1、将一个或者多个 field-value 对设置到哈希表中</h6><pre><code class="markdown">hset key field1 value1 [field2 value2 ......]</code></pre>
<ul>
<li>key 相当于对象名称，field 是属性名，value 是属性值。一个对象可以多个属性</li>
<li>如果 key filed 已经存在，value 会把以前的值覆盖掉</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>hset stu1001 id 1001</em> : key 为 stu1001 ，field 为 id ，value 值是 1001</p>
</blockquote>
<h6 id="2、批量将多个-field-value-对设置到哈希表中"><a href="#2、批量将多个-field-value-对设置到哈希表中" class="headerlink" title="2、批量将多个 field-value 对设置到哈希表中"></a>2、批量将多个 field-value 对设置到哈希表中</h6><pre><code class="markdown">hmset key field1 value1 [field2 value2 ......]</code></pre>
<ul>
<li>和 1 的功能其实一样，redis4.0 以上版本已经弃用</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>hmset stu1002 id 1002 name lisi age 20</em> </p>
</blockquote>
<h6 id="3、将一个-field-value-对设置到哈希表中，当-key-field-不存在时，设置成功；若存在则放弃设置"><a href="#3、将一个-field-value-对设置到哈希表中，当-key-field-不存在时，设置成功；若存在则放弃设置" class="headerlink" title="3、将一个 field-value 对设置到哈希表中，当 key-field 不存在时，设置成功；若存在则放弃设置"></a>3、将一个 field-value 对设置到哈希表中，当 key-field 不存在时，设置成功；若存在则放弃设置</h6><pre><code class="markdown">hsetnx key field value</code></pre>
<blockquote>
<p>例：</p>
<p><em>hsetnx stu1001 age 30</em> : 往 stu1001 这个哈希表从设置 age 30 这个 field-value，哈希表中若存在 age 这个 field，则放弃设置</p>
</blockquote>
<h5 id="DELETE相关-3"><a href="#DELETE相关-3" class="headerlink" title="DELETE相关"></a>DELETE相关</h5><h6 id="1、从指定哈希表中删除一个或者多个-field"><a href="#1、从指定哈希表中删除一个或者多个-field" class="headerlink" title="1、从指定哈希表中删除一个或者多个 field"></a>1、从指定哈希表中删除一个或者多个 field</h6><pre><code class="markdown">hdel key field1 [field2 field3 ......]</code></pre>
<blockquote>
<p>例：</p>
<p><em>hdel stu1001 name age</em> : 从 stu1001 这个哈希表中删除 name 和 age 这两个域和值</p>
</blockquote>
<h5 id="UPDATE相关-3"><a href="#UPDATE相关-3" class="headerlink" title="UPDATE相关"></a>UPDATE相关</h5><h6 id="1、对指定哈希表中指定的-field-值进行整数加法运算"><a href="#1、对指定哈希表中指定的-field-值进行整数加法运算" class="headerlink" title="1、对指定哈希表中指定的 field 值进行整数加法运算"></a>1、对指定哈希表中指定的 field 值进行整数加法运算</h6><pre><code class="markdown">hincrby key field int</code></pre>
<blockquote>
<p>例：</p>
<p><em>hincrby stu1001 age 5</em> : 对 stu1001 这个哈希表中的 age 这个 field 的值进行加 5 运算</p>
</blockquote>
<h6 id="2、对指定哈希表中指定的-field-值进行浮点数加法运算"><a href="#2、对指定哈希表中指定的-field-值进行浮点数加法运算" class="headerlink" title="2、对指定哈希表中指定的 field 值进行浮点数加法运算"></a>2、对指定哈希表中指定的 field 值进行浮点数加法运算</h6><pre><code class="markdown">hincrbyfloat key field float</code></pre>
<blockquote>
<p>例：</p>
<p><em>hset stu1001 score 80.5</em></p>
<p><em>hincrbyfloat stu1001  score 5.5</em> ： 对 stu1001 这个哈希表中的 score 这个 field 的值进行加 5.5运算</p>
</blockquote>
<h5 id="QEURY相关"><a href="#QEURY相关" class="headerlink" title="QEURY相关"></a>QEURY相关</h5><h6 id="1、获取指定哈希表中指定-field-的值"><a href="#1、获取指定哈希表中指定-field-的值" class="headerlink" title="1、获取指定哈希表中指定 field 的值"></a>1、获取指定哈希表中指定 field 的值</h6><pre><code class="markdown">hget key field</code></pre>
<blockquote>
<p>例：</p>
<p><em>hget stu1001 id</em> : 获取 key 为 stu1001 ，field 为 id 的 value 值</p>
<p><em>hget stu1001 name</em> </p>
</blockquote>
<h6 id="2、批量获取指定哈希表中的-field-的值"><a href="#2、批量获取指定哈希表中的-field-的值" class="headerlink" title="2、批量获取指定哈希表中的 field 的值"></a>2、批量获取指定哈希表中的 field 的值</h6><pre><code class="markdown">hmget key field1 [field2 field3 ......]</code></pre>
<blockquote>
<p>例：</p>
<p><em>hmget stu1001 id name age</em> : 批量获取 key 为 stu1001 的哈希表中 field 为 id，name，age 的值</p>
</blockquote>
<h6 id="3、获取指定哈希表中所有的-field-和-value"><a href="#3、获取指定哈希表中所有的-field-和-value" class="headerlink" title="3、获取指定哈希表中所有的 field 和 value"></a>3、获取指定哈希表中所有的 field 和 value</h6><pre><code class="markdown">hgetall key</code></pre>
<blockquote>
<p>例：</p>
<p><em>hgetall stu1001</em> ： 获取 stu1001 的哈希表中所有的 域 和 值</p>
</blockquote>
<h6 id="4、获取指定哈希表中所有的-field-个数"><a href="#4、获取指定哈希表中所有的-field-个数" class="headerlink" title="4、获取指定哈希表中所有的 field 个数"></a>4、获取指定哈希表中所有的 field 个数</h6><pre><code class="markdown">hlen key</code></pre>
<blockquote>
<p>例：</p>
<p><em>hlen stu1001</em> ： 获取 stu1001 这个哈希表中所有 field 的个数</p>
</blockquote>
<h6 id="5、判断指定哈希表中是否存在某一个-field"><a href="#5、判断指定哈希表中是否存在某一个-field" class="headerlink" title="5、判断指定哈希表中是否存在某一个 field"></a>5、判断指定哈希表中是否存在某一个 field</h6><pre><code class="markdown">hexists key field</code></pre>
<ul>
<li>存在返回 1</li>
<li>不存在返回 0</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>hexists stu1001 name</em> ： 判断 stu1001 这个哈希表中是否存在 name 这个 field</p>
</blockquote>
<h6 id="6、获取指定哈希表中所有的-field-列表"><a href="#6、获取指定哈希表中所有的-field-列表" class="headerlink" title="6、获取指定哈希表中所有的 field 列表"></a>6、获取指定哈希表中所有的 field 列表</h6><pre><code class="markdown">hkeys key</code></pre>
<blockquote>
<p>例：</p>
<p><em>hkeys stu1001</em> ： 获取 stu1001 这个哈希表中所有的 field</p>
</blockquote>
<h6 id="7、获取指定哈希表中所有的-value-列表"><a href="#7、获取指定哈希表中所有的-value-列表" class="headerlink" title="7、获取指定哈希表中所有的 value 列表"></a>7、获取指定哈希表中所有的 value 列表</h6><pre><code class="markdown">hvals key</code></pre>
<blockquote>
<p>例：</p>
<p><em>hvals stu1001</em> ： 获取 stu1001 这个哈希表中所有的值</p>
</blockquote>
<h4 id="5、zset"><a href="#5、zset" class="headerlink" title="5、zset"></a>5、zset</h4><h5 id="zset-类型数据特点"><a href="#zset-类型数据特点" class="headerlink" title="zset 类型数据特点"></a>zset 类型数据特点</h5><ul>
<li>有序集合<ul>
<li>本质上是集合，所以元素不能重复</li>
<li>每一个元素都关联一个分数，redis 会根据分数对元素自动排序</li>
<li>分数可以重复</li>
<li>既然有序集合中每一个元素都有顺序，那么也都有下标</li>
<li>有序集合中元素的排序规则又和列表中元素的排序规则不一样</li>
</ul>
</li>
</ul>
<h5 id="INSERT相关-4"><a href="#INSERT相关-4" class="headerlink" title="INSERT相关"></a>INSERT相关</h5><h6 id="1、将一个或者多个-member-及其-score-值加入有序集合"><a href="#1、将一个或者多个-member-及其-score-值加入有序集合" class="headerlink" title="1、将一个或者多个 member 及其 score 值加入有序集合"></a>1、将一个或者多个 member 及其 score 值加入有序集合</h6><pre><code class="markdown">zadd key score member [score member score member ......]</code></pre>
<ul>
<li>如果元素已经存在，则把分数覆盖，会再次排序</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>zadd zset01 20 z1 30 z2 50 z3 40 z4</em> : 往 zet01 这个有序集合里面添加 z1 , z2 , z3 , z4 这几个元素，会按分数从小到大自动排序</p>
<ul>
<li>结果为： z1 z2 z4 z3</li>
</ul>
<p><em>zadd zset01 60 z2</em></p>
<ul>
<li>结果为：z1 z4 z3 z2</li>
</ul>
</blockquote>
<h5 id="DELETE相关-4"><a href="#DELETE相关-4" class="headerlink" title="DELETE相关"></a>DELETE相关</h5><h6 id="1、删除指定有序集合中一个或者多个元素"><a href="#1、删除指定有序集合中一个或者多个元素" class="headerlink" title="1、删除指定有序集合中一个或者多个元素"></a>1、删除指定有序集合中一个或者多个元素</h6><pre><code class="markdown">zrem key member [member ......]</code></pre>
<blockquote>
<p>例：</p>
<p><em>zrem zset01 z3 z4</em> ： 从 zset01 集合中移除 z3 和z4 这两个元素</p>
</blockquote>
<h6 id="QUERY相关-3"><a href="#QUERY相关-3" class="headerlink" title="QUERY相关"></a>QUERY相关</h6><h6 id="1、获取指定有序集合中指定下标区间的元素（按-score-分数从小到大排序）"><a href="#1、获取指定有序集合中指定下标区间的元素（按-score-分数从小到大排序）" class="headerlink" title="1、获取指定有序集合中指定下标区间的元素（按 score 分数从小到大排序）"></a>1、获取指定有序集合中指定下标区间的元素（按 score 分数从小到大排序）</h6><pre><code class="markdown">zrange key startIndex endIndex [withscores]</code></pre>
<ul>
<li>带上 withscores 会把每个元素的分数 score 也显示出来</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>zrange zset01 0 -1</em> ： 获取 zset01 集合中所有的元素，按 score 的值从小到大顺序获取</p>
<p><em>zrange zset01 0 -1 withscores</em> ： 获取 zset01 集合中所有的元素，并且显示每个元素的分数</p>
</blockquote>
<h6 id="2、获取指定有序集合中指定下标区间的元素（按-score-分数从大到小排序）"><a href="#2、获取指定有序集合中指定下标区间的元素（按-score-分数从大到小排序）" class="headerlink" title="2、获取指定有序集合中指定下标区间的元素（按 score 分数从大到小排序）"></a>2、获取指定有序集合中指定下标区间的元素（按 score 分数从大到小排序）</h6><pre><code class="markdown">zrevrange key startIndex endIndex [withscores]</code></pre>
<ul>
<li>反转：reverse</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>zrevrange zset01 0 -1</em>  : 获取 zset01 集合中所有的元素，按 score 的值从大到小顺序获取</p>
</blockquote>
<h6 id="3、获取指定有序集合中指定分数区间（闭区间）的元素（按-score-分数从小到大排序）"><a href="#3、获取指定有序集合中指定分数区间（闭区间）的元素（按-score-分数从小到大排序）" class="headerlink" title="3、获取指定有序集合中指定分数区间（闭区间）的元素（按 score 分数从小到大排序）"></a>3、获取指定有序集合中指定分数区间（闭区间）的元素（按 score 分数从小到大排序）</h6><pre><code class="markdown">zrangebyscore key min max [withscores]</code></pre>
<blockquote>
<p>例：</p>
<p><em>zrangebyscore zset01 30 50 withscores</em>  ： 获取 zset01 集合中分数区间在 30 到 50 之间的元素，并且显示元素的分数</p>
</blockquote>
<h6 id="4、获取指定有序集合中指定分数区间（闭区间）的元素（按-score-分数从大到小排序）"><a href="#4、获取指定有序集合中指定分数区间（闭区间）的元素（按-score-分数从大到小排序）" class="headerlink" title="4、获取指定有序集合中指定分数区间（闭区间）的元素（按 score 分数从大到小排序）"></a>4、获取指定有序集合中指定分数区间（闭区间）的元素（按 score 分数从大到小排序）</h6><pre><code class="markdown">zrevrangebyscore key max min [withscores]</code></pre>
<ul>
<li>使用 <code>)</code> 表示不包括 min 和 max</li>
</ul>
<blockquote>
<p>例：</p>
<p><em>zrevrangebyscore zset01 50 30</em> ： 获取 zset01 集合中分数区间在 50 到 30 之间的元素，按分数从大到小倒序排序</p>
</blockquote>
<h6 id="5、获取指定有序集合中所有元素的个数"><a href="#5、获取指定有序集合中所有元素的个数" class="headerlink" title="5、获取指定有序集合中所有元素的个数"></a>5、获取指定有序集合中所有元素的个数</h6><pre><code class="markdown">zcard key</code></pre>
<ul>
<li>card 表示统计</li>
</ul>
<blockquote>
<p><em>zcard zset01</em>  ： 获取 zset01 集合中所有元素的个数</p>
</blockquote>
<h6 id="6、获取指定有序集合中分数在指定区间内（闭区间）的元素的个数"><a href="#6、获取指定有序集合中分数在指定区间内（闭区间）的元素的个数" class="headerlink" title="6、获取指定有序集合中分数在指定区间内（闭区间）的元素的个数"></a>6、获取指定有序集合中分数在指定区间内（闭区间）的元素的个数</h6><pre><code class="markdown">zcount key min max</code></pre>
<blockquote>
<p>例：</p>
<p><em>zcount zset01 20 50</em> ： 获取 zset01 集合中分数在 20 到 50 范围内的元素的个数</p>
</blockquote>
<h6 id="7、获取指定有序集合中指定元素的排名（排名从-0-开始）"><a href="#7、获取指定有序集合中指定元素的排名（排名从-0-开始）" class="headerlink" title="7、获取指定有序集合中指定元素的排名（排名从 0 开始）"></a>7、获取指定有序集合中指定元素的排名（排名从 0 开始）</h6><pre><code class="markdown">zrank key member</code></pre>
<blockquote>
<p>例：</p>
<p><em>zrank zset01 z4</em> ： 获取 zset01 集合中 z4 元素的排名（从分数小到大排）</p>
</blockquote>
<h6 id="8、获取指定有序集合中指定元素的排名（按照分数从大到小的排名）"><a href="#8、获取指定有序集合中指定元素的排名（按照分数从大到小的排名）" class="headerlink" title="8、获取指定有序集合中指定元素的排名（按照分数从大到小的排名）"></a>8、获取指定有序集合中指定元素的排名（按照分数从大到小的排名）</h6><pre><code class="markdown">zrevrank key member</code></pre>
<blockquote>
<p>例：</p>
<p><em>zrevrank zset01 z2</em> ： 获取 zset01 集合中 z2 元素的排名（从分数大到小排）</p>
</blockquote>
<h6 id="9、获取指定有序集合中指定元素的分数"><a href="#9、获取指定有序集合中指定元素的分数" class="headerlink" title="9、获取指定有序集合中指定元素的分数"></a>9、获取指定有序集合中指定元素的分数</h6><pre><code class="markdown">zscore key member</code></pre>
<blockquote>
<p>例：</p>
<p><em>zscore zset01 z4</em> ： 获取 zset01 集合中 z4 元素的分数</p>
</blockquote>
<hr>
<h2 id="八、关于-Redis-的配置文件"><a href="#八、关于-Redis-的配置文件" class="headerlink" title="八、关于 Redis 的配置文件"></a>八、关于 Redis 的配置文件</h2><ul>
<li>在 redis 根目录下提供 redis.conf 配置文件</li>
<li>可以配置一些 redis 服务端运行时的一些参数</li>
<li>如果不使用配置文件，那么 redis 会按照默认的参数运行</li>
<li>如果使用配置文件，在启动 redis 服务时必须指定所使用的配置文件</li>
</ul>
<h3 id="1、redis-配置文件中有关网络的配置"><a href="#1、redis-配置文件中有关网络的配置" class="headerlink" title="1、redis 配置文件中有关网络的配置"></a>1、redis 配置文件中有关网络的配置</h3><h4 id="port"><a href="#port" class="headerlink" title="port"></a>port</h4><ul>
<li>指定 redis 服务所使用的端口，默认使用 6379</li>
</ul>
<h4 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h4><ul>
<li>配置客户端连接 redis 服务时，所能使用的 ip 地址，默认可以使用 redis 服务所在主机上任何一个 ip 都可以；一般情况下，都会配置一个 ip，而且通常是一个真实的 ip</li>
</ul>
<blockquote>
<p>如果配置了 port 和 bind，则客户端连接 redis 服务时，必须指定端口和 ip</p>
<ul>
<li>redis-cli -h 192.168.42.128 -p 6379</li>
<li>redis-cli -h 192.168.42.128 -p 6379 shutdown     关闭redis服务</li>
</ul>
</blockquote>
<h4 id="tcp-keepalive"><a href="#tcp-keepalive" class="headerlink" title="tcp-keepalive"></a>tcp-keepalive</h4><ul>
<li>TCP 连接保活策略，单位为秒</li>
</ul>
<h3 id="2、常规配置"><a href="#2、常规配置" class="headerlink" title="2、常规配置"></a>2、常规配置</h3><ul>
<li><p><strong>loglevel</strong></p>
<ul>
<li>配置日志级别 ，开发阶段可以设置成 <strong>debug</strong>，上线阶段通常设置为 <strong>notice</strong> 或者 <strong>warning</strong></li>
</ul>
</li>
<li><p><strong>logfile</strong></p>
<ul>
<li>指定日志文件。redis 在运行过程中，会输出一些日志信息；默认情况下，这些日志信息会输出到控制台；我们可以使用 logfile 配置日志文件，使 redis  把日志信息输出到指定文件中。</li>
</ul>
</li>
<li><p><strong>databases</strong></p>
<ul>
<li>配置 redis 服务默认创建的数据库实例个数，默认值 16</li>
</ul>
</li>
</ul>
<h3 id="3、requirepass"><a href="#3、requirepass" class="headerlink" title="3、requirepass"></a>3、requirepass</h3><ul>
<li>设置访问 redis 服务时所使用的密码；默认不使用。</li>
<li>此参数必须在 <strong>protected-mode=yes</strong> 时才起作用。</li>
<li>一旦设置了密码验证，客户端连接 redis 服务时，必须使用密码连接<br>使用密码登录客户端：redis-cli -h ip -p 端口 -a 密码     （a 表示 auth，身份验证）</li>
</ul>
<hr>
<h2 id="九、关于-Redis-的持久化"><a href="#九、关于-Redis-的持久化" class="headerlink" title="九、关于 Redis 的持久化"></a>九、关于 Redis 的持久化</h2><p>redis 提供持久化策略，在适当的时机采用适当的手段把内存中的数据持久化到磁盘中，每次 redis 服务启动时都可以把磁盘上的数据再次加载内存中使用。</p>
<h3 id="一、RDB-策略"><a href="#一、RDB-策略" class="headerlink" title="一、RDB 策略"></a>一、RDB 策略</h3><ul>
<li>指定时间间隔内，redis 服务执行指定次数的写操作，会自动触发一次持久化操作。</li>
<li>RDB 策略是 redis 默认的持久化策略，redis 服务开启时这种持久化策略就已经默认开启了。</li>
</ul>
<blockquote>
<p><strong>save &lt;seconds&gt; &lt;changes&gt;</strong></p>
<p>配置持久化策略 ，如 save 60 2 ：一分钟执行 2 次写操作触发持久化</p>
</blockquote>
<blockquote>
<p><strong>dbfilename</strong></p>
<p>配置redis RDB 持久化数据存储的文件</p>
</blockquote>
<blockquote>
<p><strong>dir</strong></p>
<p>配置 redis RDB 持久化文件所在的目录</p>
</blockquote>
<h3 id="二、AOF-策略"><a href="#二、AOF-策略" class="headerlink" title="二、AOF 策略"></a>二、AOF 策略</h3><ul>
<li>采用操作日志来记录进行每一次写操作，每次 redis 服务启动时，都会重新执行一遍操作日志中的指令。</li>
<li>效率低下，redis 默认不开启 AOF 功能。</li>
</ul>
<blockquote>
<p><strong>appendonly</strong></p>
<p>配置是否开启 AOF 策略</p>
</blockquote>
<blockquote>
<p><strong>appendfilename</strong></p>
<p>配置操作日志文件</p>
</blockquote>
<h3 id="三、小结"><a href="#三、小结" class="headerlink" title="三、小结"></a>三、小结</h3><ul>
<li>根据数据的特点决定开启哪种持久化策略</li>
<li>一般情况，开启 RDB 足够了。</li>
</ul>
<hr>
<h2 id="十、关于-Redis-的事务"><a href="#十、关于-Redis-的事务" class="headerlink" title="十、关于 Redis 的事务"></a>十、关于 Redis 的事务</h2><ul>
<li>事务：把一组数据库操作放在一起执行，保证操作原子性，要么同时成功，要么同时失败。</li>
<li>Redis 的事务：允许把一组 redis 命令放在一起，把命令进行序列化，然后一起执行，保证<strong>部分</strong>原子性</li>
</ul>
<h3 id="一、Redis-中事务的使用"><a href="#一、Redis-中事务的使用" class="headerlink" title="一、Redis 中事务的使用"></a>一、Redis 中事务的使用</h3><h4 id="1、multi"><a href="#1、multi" class="headerlink" title="1、multi"></a>1、multi</h4><ul>
<li>用来标记一个事务的开始</li>
</ul>
<h4 id="2、exec"><a href="#2、exec" class="headerlink" title="2、exec"></a>2、exec</h4><ul>
<li>用来执行事务队列中所有的命令</li>
</ul>
<blockquote>
<p>例：</p>
<p>multi<br>set k1 v1<br>set k2 v2<br>exec</p>
</blockquote>
<h4 id="3、redis-的事务只能保证部分原子性"><a href="#3、redis-的事务只能保证部分原子性" class="headerlink" title="3、redis 的事务只能保证部分原子性"></a>3、redis 的事务只能保证部分原子性</h4><p>1）如果一组命令中，有在压入事务队列过程中发生错误的命令，则本事务中所有的命令都不执行，能够保证事务的原子性。</p>
<blockquote>
<p>例：</p>
<p>multi<br>set k3 v3<br>seta kk vv （错误的命令）<br>set k4 v4<br>exec</p>
</blockquote>
<ul>
<li>像这种压入队列的时候发生错误，在执行的时候所有的命令都会执行失败，这种情况可以保证事务的原子性。</li>
</ul>
<p>2）如果一组命令中，在压入队列过程中正常，但是在执行事务队列命令时发生了错误，则只会影响发生错误的命令，不会影响其它命令的执行，不能够保证事务的原子性。</p>
<blockquote>
<p>例：</p>
<p>multi<br>set k3 v3<br>incr k1     (如果 k1 的 value 不是数值的话，会报错。这种语法是正确的，压入队列的过程中正常，执行时会出错)<br>set k4 v4<br>exec</p>
</blockquote>
<ul>
<li>像这种语法正常压入队列的时候正常，但是执行的时候会报错，只会影响这一条命令的执行，其它的命令正常执行。像这种就不能够保证事务的原子性了</li>
</ul>
<h4 id="4、discard"><a href="#4、discard" class="headerlink" title="4、discard"></a>4、discard</h4><ul>
<li>清除所有已经压入队列中的命令，并且结束整个事务。</li>
</ul>
<blockquote>
<p>例：</p>
<p>multi<br>set k5 v5<br>set k6 v6<br>discard</p>
</blockquote>
<h4 id="5、watch"><a href="#5、watch" class="headerlink" title="5、watch"></a>5、watch</h4><ul>
<li>监控某一个键(key) ，当事务在执行过程中，此键代表的值发生变化，则本事务放弃执行；否则，正常执行</li>
</ul>
<blockquote>
<p>如乐观锁</p>
<p>加一个 version 字段 ：id balance version 100</p>
<p>update table set balance=balance-dept , version=version + 1 where id = xxxx and version = 100 </p>
</blockquote>
<p>redis 中</p>
<blockquote>
<p>set balance 1000 (消费者余额)<br>set balance2 2000 （卖家余额）<br>set version 1 （标记，相当于我们乐观锁）</p>
<p>watch version     （监控这个变量，如果在执行过程中此 key 的值发生变化，则本事务放弃执行）<br>multi<br>decrby balance 50<br>incrby balance2 50<br>incr version<br>exec </p>
</blockquote>
<h4 id="6、unwatch"><a href="#6、unwatch" class="headerlink" title="6、unwatch"></a>6、unwatch</h4><ul>
<li>放弃监控所有的键</li>
</ul>
<blockquote>
<p>例：</p>
<p>watch version<br>unwatch             （比如要根据条件来判断是否监控这个键，不需要监控可以使用 unwatch 放弃监控所有的键，如果有其它的键需要监控需要重新 watch 监控，有这种需求可以使用）<br>multi<br>decrby balance 50<br>incrby balance2 50<br>exec </p>
</blockquote>
<h3 id="二、Redis-事务小结"><a href="#二、Redis-事务小结" class="headerlink" title="二、Redis 事务小结"></a>二、Redis 事务小结</h3><ul>
<li>单独的隔离操作：事务中的所有命令都会序列化、顺序地执行。事务在执行过程中，不会被其它客户端发来的命令请求所打断，除非使用 watch 监控某些键</li>
<li>不保证事务的原子性： redis 同一个事务如果一条命令执行失败，其它的命令仍然可能会被执行，redis 的事务没有回滚。Redis已经在系统内部进行功能简化，这样可以确保更快的运行速度，因为 Redis 不需要事务回滚的能力。</li>
</ul>
<hr>
<h2 id="十一、-Redis-消息的发布与订阅"><a href="#十一、-Redis-消息的发布与订阅" class="headerlink" title="十一、 Redis 消息的发布与订阅"></a>十一、 Redis 消息的发布与订阅</h2><ul>
<li><p>基本不用这个</p>
</li>
<li><p>redis 客户端订阅频道，消息的发布者往频道上发布消息，所有订阅此频道的客户端都能够接收到信息</p>
</li>
</ul>
<h3 id="1、subscribe"><a href="#1、subscribe" class="headerlink" title="1、subscribe"></a>1、subscribe</h3><ul>
<li>订阅一个或者多个频道的消息</li>
</ul>
<blockquote>
<p>例：</p>
<p>subscribe ch1 ch2 ch3 ： 订阅 ch1 ch2 ch3 这三个频道</p>
</blockquote>
<h3 id="2、publish"><a href="#2、publish" class="headerlink" title="2、publish"></a>2、publish</h3><ul>
<li>将消息发布到指定频道</li>
</ul>
<blockquote>
<p>例：</p>
<p>publish ch1 hello :       （2 客户端发布消息到 ch01 频道，此时订阅了 ch01 频道的 1 客户端就可以收到消息）</p>
</blockquote>
<h3 id="3、psubscribe"><a href="#3、psubscribe" class="headerlink" title="3、psubscribe"></a>3、psubscribe</h3><ul>
<li>订阅一个或者多个频道的消息，频道名支持通配符</li>
</ul>
<blockquote>
<p>例：</p>
<p>psubscribe new.* ：订阅所有以 new. 开头的频道</p>
</blockquote>
<hr>
<h2 id="十二、Redis-的主从复制"><a href="#十二、Redis-的主从复制" class="headerlink" title="十二、Redis 的主从复制"></a>十二、Redis 的主从复制</h2><ul>
<li>主少从多、主写从读、读写分离、主写同步复制到从<ul>
<li>master：主</li>
<li>slave：从</li>
</ul>
</li>
</ul>
<h3 id="一、搭建一主二从-redis-集群"><a href="#一、搭建一主二从-redis-集群" class="headerlink" title="一、搭建一主二从 redis 集群"></a>一、搭建一主二从 redis 集群</h3><p><strong>1、搭建三台 redis 服务</strong></p>
<ul>
<li>使用一个 Redis 模拟三台 redis 服务  （使用一个 linux 系统，通过修改配置文件端口号，启动三次 redis 服务，来模拟三台服务器）<ul>
<li>提供三份 redis 配置文件：redis6379.conf 、redis6380.conf 、redis6381.conf</li>
<li>修改三份配置文件：以 redis6379.conf 为例<ul>
<li><strong>bind</strong> –&gt; 127.0.0.1 (配置 ip 地址)</li>
<li><strong>port</strong> –&gt; port 6379</li>
<li><strong>:/ pidfile</strong> –&gt;查找 pidfile 的位置</li>
<li><strong>pidfile</strong> –&gt; /var/run/redis_6379.pid (改成和端口号一致)</li>
<li><strong>logfile</strong> –&gt; logfile “6379.log” （配置输出日志文件）</li>
<li><strong>dbfilename</strong>  –&gt; dbfilename dump6379.rdb     （配置持久化数据文件）</li>
</ul>
</li>
<li>分别使用三个 redis 配置文件，启动三个 redis 服务<ul>
<li>redis-server redis6379.conf &amp;</li>
<li>redis-server redis6380.conf &amp;</li>
<li>redis-server redis6381.conf &amp;    </li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>2、通过三台 redis 客户端分别连接三台 redis 服务 (使用 XShell 可以建立三个会话窗口模拟)</strong></p>
<ul>
<li>redis-cli -h 127.0.0.1 -p 6379</li>
<li>redis-cli -h 127.0.0.1 -p 6380</li>
<li>redis-cli -h 127.0.0.1 -p 6381</li>
</ul>
<p><strong>3、查看三台 redis 服务在集群中的主从角色</strong></p>
<pre><code class="markdown">info replication</code></pre>
<ul>
<li>默认情况下，所有的 redis 服务都是主机，即都能写和读，但是都还没有从机</li>
</ul>
<p><strong>4、先在 6379进行写操作</strong></p>
<pre><code class="markdown">set k1 v1</code></pre>
<ul>
<li>三台 redis 服务互相独立，互不影响</li>
</ul>
<p><strong>5、置主从关系：<code>设从不设主</code></strong></p>
<p>在 6380上执行:</p>
<pre><code class="markdown">slaveof 127.0.0.1 6379</code></pre>
<p>在6381 上执行： </p>
<pre><code class="markdown">slaveof 127.0.0.1 6379</code></pre>
<p><strong>6、<code>全量复制</code></strong></p>
<ul>
<li><strong>一旦主从关系确定，会自动把主库上已有的数据同步复制到从库</strong></li>
</ul>
<blockquote>
<p>在 6380 和 6381 上执行：keys *     查看</p>
</blockquote>
<p><strong>7、<code>增量复制</code></strong></p>
<ul>
<li><strong>主库写数据会自动同步到从库</strong></li>
</ul>
<blockquote>
<p>往 6379 上添加数据：set k2 v2<br>在 6380 和 6381 上执行： keys* ，都可以查看到数据</p>
</blockquote>
<p><strong>8、主写从读，读写分离</strong></p>
<blockquote>
<p>在 6380 和 6381 上执行： set k3 v3 ===&gt; 报错，从库只能读不能写</p>
</blockquote>
<p><strong>9、主机宕机、从机原地待命</strong></p>
<blockquote>
<ul>
<li>模拟主机宕机： </li>
</ul>
<p>关闭 6379 服务：redis-cli -h 127.0.0.1 -p 6379 shutdown </p>
<p>查看 6380 和 6381 服务的主从角色： info replication</p>
</blockquote>
<p><strong>10、主机恢复、一切恢复正常</strong></p>
<blockquote>
<ul>
<li>模拟主机重启：</li>
</ul>
<p>重启6379 服务： redis-server redis6379.conf &amp;<br>客户端连接 6379： redis-cli -h 127.0.0.1 -p 6379</p>
</blockquote>
<p><strong>11、从机宕机、主机少一个从机、其它从机不变</strong></p>
<blockquote>
<ul>
<li>模拟从机宕机：</li>
</ul>
<p>关闭 6380 服务：redis-cli -h 127.0.0.1 -p 6380 shutdown<br>查看 6379 和 6381 服务的主从角色： info replication</p>
</blockquote>
<p><strong>12、从机恢复、需要重新设置主从关系</strong></p>
<blockquote>
<ul>
<li>模拟从机恢复：</li>
</ul>
<p>重启6380 服务： redis-server redis6380.conf &amp;<br>客户端连接 6380： redis-cli -h 127.0.0.1 -p 6380</p>
<p>在 6380 上执行：slaveof 127.0.0.1 6379</p>
</blockquote>
<p><strong>13、从机上位</strong></p>
<p>1、主机宕机、从机原地待命</p>
<blockquote>
<ul>
<li>模拟主机宕机： </li>
</ul>
<p>关闭 6379 服务：redis-cli -h 127.0.0.1 -p 6379 shutdown<br>查看 6380 和 6381 服务的主从角色： info replication</p>
</blockquote>
<p>2、从机断开原来的主从关系</p>
<blockquote>
<p>在 6380 上执行：slaveof no one<br>查看 6380 服务的主从角色： info replication</p>
</blockquote>
<p>3、重新设置主从关系</p>
<blockquote>
<p>在 6381 上执行： slaveof 127.0.0.1 6380 </p>
</blockquote>
<p>4、之前主机恢复、变成孤家寡人</p>
<blockquote>
<ul>
<li>模拟主机重启：</li>
</ul>
<p>重启6379 服务： redis-server redis6379.conf &amp;<br>客户端连接 6379： redis-cli -h 127.0.0.1 -p 6379<br>查看 6379 服务的主从角色： info replication</p>
</blockquote>
<p>5、天堂变地狱</p>
<blockquote>
<p>在 6379 上执行： slaveof 127.0.0.1 6381<br>在 6381 上执行： info replication     既是主机又是从机（是 6381 的从机，同时是 6379 的主机；只要是从机的角色，就不能写操作）</p>
</blockquote>
<h3 id="二、小结"><a href="#二、小结" class="headerlink" title="二、小结"></a>二、小结</h3><ul>
<li>一台主机配置多台从机，一台从机又可以配置多台从机，从而形成一个庞大的集群结构。</li>
<li>减轻一台主机的压力，但是增加了服务间的延迟时间。</li>
</ul>
<hr>
<h2 id="十三、Redis-哨兵模式"><a href="#十三、Redis-哨兵模式" class="headerlink" title="十三、Redis 哨兵模式"></a>十三、Redis 哨兵模式</h2><blockquote>
<p><strong>主机宕机、从机上位的自动版</strong></p>
</blockquote>
<p><strong>搭建三台 redis 服务： 使用一个 Redis 模拟三台 redis 服务</strong></p>
<ul>
<li><p>1、搭建一主二从集群架构： （十二 的前5步）</p>
</li>
<li><p>2、<strong>提供 哨兵配置文件</strong> </p>
<ul>
<li>在 redis 安装目录创建配置文件<ul>
<li>redis_sentinel.conf</li>
</ul>
</li>
<li>编写配置文件<ul>
<li><strong>sentinel monitor 哨兵名 ip地址 端口 哨兵上位票数</strong></li>
<li>如：sentinel monitor dc-redis 127.0.0.1 6379 1             <ul>
<li>(dc-redis 是哨兵的名字，名字随意；monitor：监控)</li>
</ul>
</li>
<li>表示指定监控主机的 ip 地址，port端口，得到哨兵的投票数（当哨兵投票数大于或者等于此数时切换主从关系）</li>
</ul>
</li>
</ul>
</li>
<li><p>3、启动哨兵服务</p>
<ul>
<li>redis-sentinel 配置文件<ul>
<li>如：redis sentinel redis_sentinel.conf (使用的相对目录)</li>
</ul>
</li>
</ul>
</li>
<li><p>4、主机宕机</p>
<ul>
<li>模拟主机宕机： <ul>
<li>关闭 6379 服务：redis-cli -h 127.0.0.1 -p 6379 shutdown </li>
<li>查看 6380 和 6381 服务的主从角色： info replication</li>
</ul>
</li>
<li>哨兵程序自动选择从机上位</li>
</ul>
</li>
<li><p>5、<strong>之前主机恢复：自动从属于新的主机</strong></p>
<ul>
<li>重启6379 服务： redis-server redis6379.conf &amp; </li>
<li>客户端连接 6379： redis-cli -h 127.0.0.1 -p 6379</li>
</ul>
</li>
</ul>
<hr>
<h2 id="十四、关于主从复制小结"><a href="#十四、关于主从复制小结" class="headerlink" title="十四、关于主从复制小结"></a>十四、关于主从复制小结</h2><ul>
<li>查看主从复制关系命令 ： info replication</li>
<li>设置主从关系命令 ：slaveof 主机ip 主机port</li>
<li>开启哨兵模式命令： ./redis-sentinel 哨兵配置文件</li>
<li>主从复制原则： 开始是全量复制，之后是增量复制</li>
<li>哨兵模式三大任务： 监控，提醒，自动故障迁移</li>
</ul>
<hr>
<h2 id="十五、Jedis-操作-Redis"><a href="#十五、Jedis-操作-Redis" class="headerlink" title="十五、Jedis 操作 Redis"></a>十五、Jedis 操作 Redis</h2><p>在 java 程序访问 redis</p>
<h3 id="一、步骤-1"><a href="#一、步骤-1" class="headerlink" title="一、步骤"></a>一、步骤</h3><p>1、创建 maven 工程</p>
<p>2、添加 jedis 依赖</p>
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;redis.clients&lt;/groupId&gt;
    &lt;artifactId&gt;jedis&lt;/artifactId&gt;
    &lt;version&gt;3.1.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
<p>3、创建 Jedis 连接</p>
<ul>
<li>记得关闭 linux 防火墙</li>
</ul>
<p>eg：</p>
<ul>
<li>使用 Redis 官方推荐的 Jedis，在 java 应用中操作 Redis。Jedis 几乎涵盖了 Redis 的所有命令。操作 Redis 命令在 Jedis 中以方法的形式出现。（maven 中导入 Jedis jar包就可以使用）。</li>
</ul>
<pre><code class="java">public class JedisTest{
  public static void main(String[] args){
    Jedis jedis = new Jedis(&quot;ip地址&quot;,端口号);
    String ret = jedis.ping();
    Set&lt;String&gt; keys = jedis.keys(&quot;*&quot;);
    Boolean ret = jedis.exists(&quot;k2&quot;);
    jedis.select(1); //切换到 1 号数据库实例
  }
}</code></pre>
<h3 id="二、Jedis-中使用事务"><a href="#二、Jedis-中使用事务" class="headerlink" title="二、Jedis 中使用事务"></a>二、Jedis 中使用事务</h3><pre><code class="java">//连接 redis 服务
Jedis jedis = new Jedis(&quot;192.168.42.130&quot;,6379);
//获取事务的对象
Transaction tran = jedis.multi(); //相当于开启了事务，使用事务对象操作命令
tran.set(&quot;k1&quot;,&quot;v1&quot;);
tran.exec(); //提交事务</code></pre>

        </div>
        <!-- .entry-content -->
        <div class="single-reward">
          <div class="reward-open">赏
            <div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="null"></li>
                <li class="wechat-code"><img src="null"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre half previous">
          
            <a href="/2022/01/24/Java并发编程/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://fastly.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E6%96%87%E7%AB%A0%E8%83%8C%E6%99%AF/14.jpg" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E6%96%87%E7%AB%A0%E8%83%8C%E6%99%AF/14.jpg">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                Java并发编程笔记</h3>
                <hr>
              </div>
            </a>
          </div>
        
        
          
            <div class="post-nepre half next">
          
            <a href="/2021/09/25/MySQL基础/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://fastly.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/01.jpg" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/01.jpg">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                MySQL基础</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "6RN5znkrKL14y7H74i40TEuh-gzGzoHsz",
        appKey: "a9t6VNN6REJFw4IejG3wBYXS",
        path: window.location.pathname,
        placeholder: "你是我一生只会遇见一次的惊喜 ..."
      })
  }
</script>




      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="https://schema.org/Person">
          <a href="tenincense.cn" class="profile gravatar"><img src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/202205291139260.jpg" itemprop="image" alt="TenIncense" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="tenincense.cn" itemprop="url" rel="author">TenIncense</a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i>面如霜上雪</p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>



    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            // PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 TenIncense<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://fastly.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://fastly.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy 2020</p>
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a href="https://www.hojun.cn/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">TenIncense</a>, Powered by Hexo, Hosted by Coding Pages</a>
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>



<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://fastly.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<script src="/js/botui.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "","name":"","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "","name":"","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //有图的情况
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://tenincense-1309094827.cos.ap-guangzhou.myqcloud.com/image/%E8%83%8C%E6%99%AF%202/601644262819_.pic.jpg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">TenIncense</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="https://github.com/Tenincense0714" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
        <a href="https://wpa.qq.com/msgrd?v=3&uin=954655431&site=qq&menu=yes" class="fa fa-qq" target="_blank" style="color: #25c6fe; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            归档
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/技术/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  技术
                </a>
              </li>
            
              <li>
                <a href="/categories/生活/">
                  <i class="fa fa-file-text-o" aria-hidden="true"></i>
                  生活
                </a>
              </li>
            
              <li>
                <a href="/categories/资源/">
                  <i class="fa fa-cloud-download" aria-hidden="true"></i>
                  资源
                </a>
              </li>
            
              <li>
                <a href="/categories/随想/">
                  <i class="fa fa-commenting-o" aria-hidden="true"></i>
                  随想
                </a>
              </li>
            
              <li>
                <a href="/categories/转载/">
                  <i class="fa fa-book" aria-hidden="true"></i>
                  转载
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/悦读/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  书单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
              <li>
                <a href="/music/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  歌单
                </a>
              </li>
            
              <li>
                <a href="/tags/图集/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  图集
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            留言板
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            友人帐
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/donate/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
            赞赏
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            关于
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  我？
                </a>
              </li>
            
              <li>
                <a href="/theme-sakura/">
                  <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                  主题
                </a>
              </li>
            
              <li>
                <a href="/lab/">
                  <i class="fa fa-cogs" aria-hidden="true"></i>
                  Lab
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/client/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-android faa-vertical" aria-hidden="true"></i>
            客户端
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/atom.xml">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
            RSS
          </span>
        </a>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://fastly.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://fastly.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id="2660651585"

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.7"

    mutex="true"

</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>
</body>
</html>
